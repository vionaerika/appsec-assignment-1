@page
@model FreshFarmMarket.Pages.Register

<form id="register_form" enctype="multipart/form-data" method="post">
  <div class="row">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <h2>Register</h2>
    <br />
    <div class="col-md-8">
      <div class="mb-3">
        <label class="col-form-label" asp-for="registerModel.FullName"></label>
        <input id="fullname-input" class="form-control" aria-required="true" asp-for="registerModel.FullName" />
        <span id="fullname-validation" class="text-danger" asp-validation-for="registerModel.FullName"></span>
      </div>
      <div class="mb-3">
        <label class="col-form-label" asp-for="registerModel.CreditCardNo"></label>
        <input id="creditcard-input" class="form-control" aria-required="true" asp-for="registerModel.CreditCardNo" />
        <span id="creditcard-validation" class="text-danger" asp-validation-for="registerModel.CreditCardNo"></span>
      </div>
      <div class="mb-3">
        <label class="col-form-label" asp-for="registerModel.Gender"></label>
        <div>
          @Html.RadioButtonFor(model => model.registerModel.Gender, "M", new {
          @class = "form-check-input", @checked = true })
          <label>Male</label>
          <br />
          @Html.RadioButtonFor(model => model.registerModel.Gender, "F", new {
          @class = "form-check-input" })
          <label>Female</label>
        </div>
        <span asp-validation-for="registerModel.Gender" class="text-danger"></span>
      </div>
      <div class="mb-3">
        <label class="col-form-label" asp-for="registerModel.MobileNo"></label>
        <input id="mobile-input" class="form-control" aria-required="true" asp-for="registerModel.MobileNo" />
        <span id="mobileno-validation" class="text-danger" asp-validation-for="registerModel.MobileNo"></span>
      </div>
      <div class="mb-3">
        <label class="col-form-label" asp-for="registerModel.DeliveryAddress"></label>
        <input class="form-control" aria-required="true" asp-for="registerModel.DeliveryAddress" />
        <span class="text-danger" asp-validation-for="registerModel.DeliveryAddress"></span>
      </div>
      <div class="mb-3">
        <label class="col-form-label" asp-for="registerModel.Email"></label>
        <input id="email-input" class="form-control" aria-required="true" type="email" asp-for="registerModel.Email" />
        <span id="email-validation" class="text-danger" asp-validation-for="registerModel.Email"></span>
      </div>
      <div class="mb-3">
        <label class="col-form-label" asp-for="registerModel.Password"></label>
        <input id="password-input" class="form-control" autocomplete="new-password" aria-required="true"
          asp-for="registerModel.Password" />
        <span id="password-validation" class="text-danger" asp-validation-for="registerModel.Password"></span>
      </div>
      <div class="mb-3">
        <label class="col-form-label" asp-for="registerModel.ConfirmPassword"></label>
        <input class="form-control" autocomplete="new-password" aria-required="true"
          asp-for="registerModel.ConfirmPassword" />
        <span class="text-danger" asp-validation-for="registerModel.ConfirmPassword"></span>
      </div>
      <div class="mb-3">
        <label class="col-form-label" asp-for="registerModel.AboutMe"></label>
        <input class="form-control" aria-required="true" asp-for="registerModel.AboutMe" />
        <span class="text-danger" asp-validation-for="registerModel.AboutMe"></span>
      </div>
      <div class="mb-3">
        <input type="file" class="form-control" accept="image/jpg" asp-for="PhotoUpload" />
        <span asp-validation-for="PhotoUpload" class="text-danger"></span>
      </div>
    </div>
    <button id="register-submit" type="button" class="btn btn-lg btn-primary">
      Register
    </button>
  </div>
</form>

@section Scripts {
<script>
  $(document).ready(() => {
    var regexPwd = new RegExp(
      "^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[#?!@@$%\^&\*\-])(?=.{12,})"
    );
    var regexFN = new RegExp("[A-z ]+");
    var regexCC = new RegExp("[0-9]{16}");
    var regexMobile = new RegExp("[0-9]{8}");
    var regexEmail =
      /^[\w!#$%&'*+\-/=?\^_`{|}~]+(\.[\w!#$%&'*+\-/=?\^_`{|}~]+)*@@((([\-\w]+\.)+[a-zA-Z]{2,4})|(([0-9]{1,3}\.){3}[0-9]{1,3}))$/;

    $("#register-submit").click(() => {
      var resPwd = regexPwd.test($("#password-input").val());
      var resFN = regexFN.test($("#fullname-input").val().trim());
      var resCC = regexCC.test($("#creditcard-input").val());
      var resMobile = regexMobile.test($("#mobile-input").val());
      var resEmail = regexEmail.test($("#email-input").val());

      if (resPwd && resFN && resCC && resMobile && resEmail) {
        $("#register-form").submit();
      } else {
        if (!resPwd) {
          $("#password-validation").text(
            "Password requires At least one upper case, at least one lower case, at least one digit, at least one special character (#?!@@$%^&*-), minimum 12 characters"
          );
        } else {
          $("#password-validation").text();
        }
        console.log(resFN, resCC);
        if (!resFN) {
          $("#fullname-validation").text(
            "Name cannot be empty and can only contain alphabets and space."
          );
        } else {
          $("#fullname-validation").text();
        }
        if (!resCC) {
          $("#creditcard-validation").text(
            "Credit Cards Number Without Spacing. eg: 4444111122223333"
          );
        } else {
          $("#creditcard-validation").text();
        }
        if (!resMobile) {
          $("#mobileno-validation").text(
            "Invalid Mobile Number Format. Please key in eg: 88888888"
          );
        } else {
          $("#mobileno-validation").text();
        }
        if (!resEmail) {
          $("#email-validation").text("Invalid Email Format");
        } else {
          $("#email-validation").text();
        }
      }
    });
  });
</script>
}